(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{22:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),o=t(16),s=t.n(o),u=(t(22),t(6)),i=t(4),l=t(3),m=function(e){var n=e.values,t=e.handleChange,c=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:function(e){return c(e)},children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n.name,name:"name",onChange:t}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{value:n.number,name:"number",onChange:t})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.handleDelete;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[n.name,": ",n.number]},n.name),Object(r.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"Delete"})]})},b=function(e){var n=e.persons,t=e.handleFilter,c=e.handleDelete;return n.filter(t).map((function(e){return Object(r.jsx)(d,{person:e,handleDelete:c},e.name)}))},j=t(5),f=t.n(j),h="http://localhost:3001/api/persons",v=function(){return f.a.get(h)},O=function(e){return f.a.post(h,e)},g=function(e,n){return f.a.put("".concat(h,"/").concat(e),n)},p=function(e){return f.a.delete("".concat(h,"/").concat(e))},x=(t(40),function(e){var n=e.message,t=e.severity;return""===n?null:Object(r.jsx)("div",{className:"error"===t?"error":"success",children:n})}),y=function(){var e={name:"",number:""},n=Object(c.useState)(e),t=Object(l.a)(n,2),a=t[0],o=t[1],s=Object(c.useState)(""),d=Object(l.a)(s,2),j=d[0],f=d[1],h=Object(c.useState)([]),y=Object(l.a)(h,2),w=y[0],C=y[1],S=Object(c.useState)(!1),D=Object(l.a)(S,2),T=D[0],F=D[1],k=Object(c.useState)({message:"",severity:""}),I=Object(l.a)(k,2),P=I[0],U=I[1];Object(c.useEffect)((function(){v().then((function(e){C(e.data)}))}),[T]),console.log(w);var A=function(){F(!T)},B=function(){o(e)},E=function(){var e={name:a.name,number:a.number};O(e).then((function(n){console.log("Succesfully added person",n),U({message:"Added ".concat(e.name),severity:"success"}),setTimeout((function(){return U({message:"",severity:""})}),2e3),B(),A()}))},J=function(e){window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&g(e.id,e).then((function(n){console.log(n),U({message:"Updated ".concat(e.name),severity:"success"}),setTimeout((function(){return U({message:"",severity:""})}),2e3),B(),A()})).catch((function(n){console.log(n),U({message:"Information of ".concat(e.name," has already been removed from server"),severity:"error"}),A(),setTimeout((function(){return U({message:"",severity:""})}),2e3)}))};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{message:P.message,severity:P.severity}),"filter shown with",Object(r.jsx)("input",{value:j,onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new:"}),Object(r.jsx)(m,{handleChange:function(e){var n=e.target,t=n.value,r=n.name;o(Object(i.a)(Object(i.a)({},a),{},Object(u.a)({},r,t)))},handleSubmit:function(e){e.preventDefault();var n=w.find((function(e){return e.name===a.name})),t=Object(i.a)(Object(i.a)({},n),{},{number:a.number});void 0!==n?J(t):E()},values:a}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{persons:w,handleFilter:function(e){return e.name.toUpperCase().includes(j.toUpperCase())},handleDelete:function(e,n){window.confirm("Delete ".concat(n))&&p(e).then((function(t){C(w.filter((function(n){return e!==n.id}))),console.log("deleted user",t),U({message:"Removed ".concat(n),severity:"error"}),setTimeout((function(){return U({message:"",severity:""})}),2e3),A()})).catch((function(e){console.log(e),U({message:"Information of ".concat(n," has already been removed from server"),severity:"error"}),A(),setTimeout((function(){return U({message:"",severity:""})}),2e3)}))}})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),a(e),o(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),w()}},[[41,1,2]]]);
//# sourceMappingURL=main.49df42c9.chunk.js.map